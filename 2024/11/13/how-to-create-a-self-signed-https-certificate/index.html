<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> å¦‚ä½•åˆ›å»ºè‡ªç­¾httpsè¯ä¹¦ Â· ğŸ¼ MYPANDA</title><meta name="description" content="å¦‚ä½•åˆ›å»ºè‡ªç­¾httpsè¯ä¹¦ - mypanda"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://mypanda.github.io/atom.xml" title="ğŸ¼ MYPANDA"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/mypanda" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">å¦‚ä½•åˆ›å»ºè‡ªç­¾httpsè¯ä¹¦</h1><div class="post-info">Nov 13, 2024</div><div class="post-content"><p>ä»åˆ›å»ºæ ¹è¯ä¹¦å¼€å§‹ï¼Œå¹¶ä½¿ç”¨æ ¹è¯ä¹¦ç­¾åè¯ä¹¦ï¼Œé€‚ç”¨äºéœ€è¦httpsåŠ å¯†çš„åœºæ™¯,Nginx,K8sç­‰ã€‚ä¸‹é¢å°†ä¼šä½¿ç”¨<code>Cloudflare</code>çš„å¼€æº<code>PKI</code>å’Œ<code>TLS</code>å·¥å…·<code>cfssl</code>åˆ›å»º</p>
<a id="more"></a>
<h2 id="æ¦‚è§ˆ"><a href="#æ¦‚è§ˆ" class="headerlink" title="æ¦‚è§ˆ"></a>æ¦‚è§ˆ</h2><ul>
<li>.crtå’Œ.cer:å¤šä¸ºPEMæˆ–DERç¼–ç çš„è¯ä¹¦,ä»…åŒ…å«å…¬é’¥éƒ¨åˆ†</li>
<li>.pem: Base64æ ¼å¼æ–‡æœ¬æ–‡ä»¶ï¼Œèƒ½åŒ…å«å…¬é’¥ï¼Œç§é’¥ï¼Œè¯ä¹¦é“¾ç­‰ä¿¡æ¯ï¼Œçµæ´»æ€§å¼º</li>
<li>.pfx(.p12):äºŒè¿›åˆ¶æ ¼å¼ï¼ŒåŒ…å«å…¬é’¥ï¼Œç§é’¥ï¼Œè¯ä¹¦é“¾ï¼Œé€‚ç”¨äºWindowsç³»ç»Ÿå’Œç§é’¥ä¼ è¾“</li>
<li>.der:äºŒè¿›åˆ¶æ ¼å¼ï¼ŒåŒåŸåŒ…å«è¯ä¹¦çš„å…¬é’¥ï¼Œé€‚åˆJavaç¯å¢ƒ</li>
</ul>
<h2 id="ä¸‹è½½è½¯ä»¶"><a href="#ä¸‹è½½è½¯ä»¶" class="headerlink" title="ä¸‹è½½è½¯ä»¶"></a>ä¸‹è½½è½¯ä»¶</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -L https://github.com/cloudflare/cfssl/releases/download/v1.5.0/cfssl_1.5.0_linux_amd64 -o cfssl</span><br><span class="line">curl -L https://github.com/cloudflare/cfssl/releases/download/v1.5.0/cfssljson_1.5.0_linux_amd64 -o cfssljson</span><br><span class="line">curl -L https://github.com/cloudflare/cfssl/releases/download/v1.5.0/cfssl-certinfo_1.5.0_linux_amd64 -o cfssl-certinfo</span><br><span class="line">chmod +x cfssl cfssljson cfssl-certinfo</span><br></pre></td></tr></table></figure>
<h2 id="æ ¹è¯ä¹¦"><a href="#æ ¹è¯ä¹¦" class="headerlink" title="æ ¹è¯ä¹¦"></a>æ ¹è¯ä¹¦</h2><h3 id="ç”Ÿæˆé»˜è®¤æ ¹è¯ä¹¦é…ç½®æ–‡ä»¶config-jsonå’Œæ ¹è¯ä¹¦ç”³è¯·æ–‡ä»¶csr-json"><a href="#ç”Ÿæˆé»˜è®¤æ ¹è¯ä¹¦é…ç½®æ–‡ä»¶config-jsonå’Œæ ¹è¯ä¹¦ç”³è¯·æ–‡ä»¶csr-json" class="headerlink" title="ç”Ÿæˆé»˜è®¤æ ¹è¯ä¹¦é…ç½®æ–‡ä»¶config.jsonå’Œæ ¹è¯ä¹¦ç”³è¯·æ–‡ä»¶csr.json"></a>ç”Ÿæˆé»˜è®¤æ ¹è¯ä¹¦é…ç½®æ–‡ä»¶<code>config.json</code>å’Œæ ¹è¯ä¹¦ç”³è¯·æ–‡ä»¶<code>csr.json</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./cfssl <span class="built_in">print</span>-defaults config &gt; config.json</span><br><span class="line">./cfssl <span class="built_in">print</span>-defaults csr &gt; csr.json</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºæ ¹è¯ä¹¦é…ç½®æ–‡ä»¶"><a href="#åˆ›å»ºæ ¹è¯ä¹¦é…ç½®æ–‡ä»¶" class="headerlink" title="åˆ›å»ºæ ¹è¯ä¹¦é…ç½®æ–‡ä»¶"></a>åˆ›å»ºæ ¹è¯ä¹¦é…ç½®æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; ca-config.json &lt;&lt; EOF</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"signing"</span>: &#123;</span><br><span class="line">    <span class="string">"default"</span>: &#123;</span><br><span class="line">      <span class="string">"expiry"</span>: <span class="string">"876000h"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="string">"profiles"</span>: &#123;</span><br><span class="line">      <span class="string">"www"</span>: &#123;</span><br><span class="line">        <span class="string">"expiry"</span>: <span class="string">"876000h"</span>,</span><br><span class="line">        <span class="string">"usages"</span>: [</span><br><span class="line">          <span class="string">"signing"</span>,</span><br><span class="line">          <span class="string">"key encipherment"</span>,</span><br><span class="line">          <span class="string">"server auth"</span>,</span><br><span class="line">          <span class="string">"client auth"</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h3 id="åˆ›å»ºæ ¹è¯ä¹¦ç”³è¯·æ–‡ä»¶"><a href="#åˆ›å»ºæ ¹è¯ä¹¦ç”³è¯·æ–‡ä»¶" class="headerlink" title="åˆ›å»ºæ ¹è¯ä¹¦ç”³è¯·æ–‡ä»¶"></a>åˆ›å»ºæ ¹è¯ä¹¦ç”³è¯·æ–‡ä»¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; ca-csr.json &lt;&lt; EOF</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"CN"</span>: <span class="string">"MyCert Root CA"</span>,</span><br><span class="line">  <span class="string">"key"</span>: &#123;</span><br><span class="line">    <span class="string">"algo"</span>: <span class="string">"rsa"</span>,</span><br><span class="line">    <span class="string">"size"</span>: 2048</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"names"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"C"</span>: <span class="string">"CN"</span>,</span><br><span class="line">      <span class="string">"ST"</span>: <span class="string">"Shanghai"</span>,</span><br><span class="line">      <span class="string">"L"</span>: <span class="string">"Shanghai"</span>,</span><br><span class="line">      <span class="string">"O"</span>: <span class="string">"MyCert Inc"</span>,</span><br><span class="line">      <span class="string">"OU"</span>: <span class="string">"MyCert Inf"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"ca"</span>: &#123;</span><br><span class="line">    <span class="string">"expiry"</span>: <span class="string">"876000h"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h3 id="ç”Ÿæˆæ ¹è¯ä¹¦ca-pemå’Œç§é’¥ca-key-pem"><a href="#ç”Ÿæˆæ ¹è¯ä¹¦ca-pemå’Œç§é’¥ca-key-pem" class="headerlink" title="ç”Ÿæˆæ ¹è¯ä¹¦ca.pemå’Œç§é’¥ca-key.pem"></a>ç”Ÿæˆæ ¹è¯ä¹¦<code>ca.pem</code>å’Œç§é’¥<code>ca-key.pem</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./cfssl gencert -initca ca-csr.json | ./cfssljson -bare ca</span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥çœ‹æ ¹è¯ä¹¦"><a href="#æŸ¥çœ‹æ ¹è¯ä¹¦" class="headerlink" title="æŸ¥çœ‹æ ¹è¯ä¹¦"></a>æŸ¥çœ‹æ ¹è¯ä¹¦</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./cfssl certinfo -cert ca.pem</span><br></pre></td></tr></table></figure>
<h2 id="è¯ä¹¦"><a href="#è¯ä¹¦" class="headerlink" title="è¯ä¹¦"></a>è¯ä¹¦</h2><h3 id="åˆ›å»ºè¯ä¹¦ç”³è¯·æ–‡ä»¶server-csr-json"><a href="#åˆ›å»ºè¯ä¹¦ç”³è¯·æ–‡ä»¶server-csr-json" class="headerlink" title="åˆ›å»ºè¯ä¹¦ç”³è¯·æ–‡ä»¶server-csr.json"></a>åˆ›å»ºè¯ä¹¦ç”³è¯·æ–‡ä»¶<code>server-csr.json</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">cat &gt; server-csr.json &lt;&lt; EOF</span><br><span class="line">&#123;</span><br><span class="line">  <span class="string">"CN"</span>: <span class="string">"Mypanda.com"</span>,</span><br><span class="line">  <span class="string">"hosts"</span>: [</span><br><span class="line">    <span class="string">"123.123.123.123"</span>,</span><br><span class="line">    <span class="string">"Mypanda.com"</span></span><br><span class="line">  ],</span><br><span class="line">  <span class="string">"key"</span>: &#123;</span><br><span class="line">    <span class="string">"algo"</span>: <span class="string">"rsa"</span>,</span><br><span class="line">    <span class="string">"size"</span>: 2048</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"names"</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="string">"C"</span>: <span class="string">"CN"</span>,</span><br><span class="line">      <span class="string">"L"</span>: <span class="string">"Shanghai"</span>,</span><br><span class="line">      <span class="string">"ST"</span>: <span class="string">"Shanghai"</span>,</span><br><span class="line">      <span class="string">"O"</span>: <span class="string">"Mypanda Co., Ltd"</span>,</span><br><span class="line">      <span class="string">"OU"</span>: <span class="string">"Mypanda Inf"</span></span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line">EOF</span><br></pre></td></tr></table></figure>
<h3 id="ç”Ÿæˆè¯ä¹¦server-pemå’Œç§é’¥server-key-pem"><a href="#ç”Ÿæˆè¯ä¹¦server-pemå’Œç§é’¥server-key-pem" class="headerlink" title="ç”Ÿæˆè¯ä¹¦server.pemå’Œç§é’¥server-key.pem"></a>ç”Ÿæˆè¯ä¹¦<code>server.pem</code>å’Œç§é’¥<code>server-key.pem</code></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./cfssl gencert -ca=ca.pem -ca-key=ca-key.pem -config=ca-config.json -profile=www server-csr.json | ./cfssljson -bare server</span><br></pre></td></tr></table></figure>
<h3 id="æŸ¥çœ‹è¯ä¹¦"><a href="#æŸ¥çœ‹è¯ä¹¦" class="headerlink" title="æŸ¥çœ‹è¯ä¹¦"></a>æŸ¥çœ‹è¯ä¹¦</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./cfssl certinfo -cert ca.pem</span><br></pre></td></tr></table></figure>
<h2 id="OpenSSLåˆ›å»ºæ ¹è¯ä¹¦å’Œè¯ä¹¦"><a href="#OpenSSLåˆ›å»ºæ ¹è¯ä¹¦å’Œè¯ä¹¦" class="headerlink" title="OpenSSLåˆ›å»ºæ ¹è¯ä¹¦å’Œè¯ä¹¦"></a><code>OpenSSL</code>åˆ›å»ºæ ¹è¯ä¹¦å’Œè¯ä¹¦</h2><p>åˆ›å»ºæ ¹è¯ä¹¦å’Œè¯ä¹¦æœ‰ä¸‹é¢å‡ ç§æ–¹å¼,åŒºåˆ«ä¸ºå¤šæ¡å‘½ä»¤è¿˜æ˜¯å•æ¡å‘½ä»¤ï¼Œäº¦æˆ–æ— éœ€è¾“å…¥ä¿¡æ¯ä¸€æ¡å‘½ä»¤</p>
<h3 id="åˆ›å»ºæ ¹è‡ªç­¾è¯ä¹¦"><a href="#åˆ›å»ºæ ¹è‡ªç­¾è¯ä¹¦" class="headerlink" title="åˆ›å»ºæ ¹è‡ªç­¾è¯ä¹¦"></a>åˆ›å»ºæ ¹è‡ªç­¾è¯ä¹¦</h3><p>ä¸‹é¢ä»¥åˆ›å»ºæ ¹è¯ä¹¦ä¸ºä¾‹</p>
<ol>
<li><p>ç¬¬ä¸€ç§æ–¹å¼,åˆ›å»ºæ ¹è¯ä¹¦ç§é’¥,åˆ›å»ºæ ¹è¯ä¹¦è¯·æ±‚æ–‡ä»¶ï¼Œç„¶åç”Ÿæˆè¯ä¹¦</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># åˆ›å»ºæ ¹è¯ä¹¦ç§é’¥</span></span><br><span class="line">openssl genpkey -algorithm RSA -out ca.key [-pkeyopt rsa_keygen_bits:2048]</span><br><span class="line"><span class="comment"># åˆ›å»ºæ ¹è¯ä¹¦è¯·æ±‚æ–‡ä»¶</span></span><br><span class="line">openssl req -new -key ca.key -out ca.csr</span><br><span class="line"><span class="comment"># åˆ›å»ºè‡ªç­¾åè¯ä¹¦</span></span><br><span class="line">openssl x509 -req -days 365 -<span class="keyword">in</span> ca.csr -signkey ca.key -out ca.crt</span><br><span class="line"><span class="comment"># æŸ¥çœ‹æ ¹è¯ä¹¦</span></span><br><span class="line">openssl x509 -<span class="keyword">in</span> ca.crt -text -noout</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç¬¬äºŒç§æ–¹å¼,ä¸€æ¡å‘½ä»¤ç”Ÿæˆæ ¹è¯ä¹¦ç§é’¥å’Œæ ¹è¯ä¹¦</p>
</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -newkey rsa:2048 -nodes -keyout ca.key -x509 -days 365 -out ca.crt</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>ç¬¬ä¸‰ç§æ–¹å¼ï¼Œä¸éœ€è¦æ‰‹åŠ¨è¾“å…¥ä¿¡æ¯ï¼Œä¸€æ¡å‘½ä»¤ç”Ÿæˆæ ¹è¯ä¹¦ç§é’¥å’Œæ ¹è¯ä¹¦</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -newkey rsa:2048 -nodes -keyout ca.key -x509 -days 365 -out ca.crt -subj <span class="string">"//C=CN/ST=Shanghai/L=Shanghai/O=Organization/OU=OrganizationUnit/CN=Domain"</span></span><br></pre></td></tr></table></figure>
<h3 id="ä½¿ç”¨ä¸Šä¸€æ­¥åˆ›å»ºçš„æ ¹è¯ä¹¦ç­¾åè¯ä¹¦"><a href="#ä½¿ç”¨ä¸Šä¸€æ­¥åˆ›å»ºçš„æ ¹è¯ä¹¦ç­¾åè¯ä¹¦" class="headerlink" title="ä½¿ç”¨ä¸Šä¸€æ­¥åˆ›å»ºçš„æ ¹è¯ä¹¦ç­¾åè¯ä¹¦"></a>ä½¿ç”¨ä¸Šä¸€æ­¥åˆ›å»ºçš„æ ¹è¯ä¹¦ç­¾åè¯ä¹¦</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># è¯ä¹¦ç§é’¥</span></span><br><span class="line">openssl genpkey -algorithm RSA -out server.key -pkeyopt rsa_keygen_bits:2048</span><br><span class="line"><span class="comment"># è¯ä¹¦ç­¾åè¯·æ±‚</span></span><br><span class="line">openssl req -new -key server.key -out server.csr</span><br><span class="line"><span class="comment"># ç­¾å‘è¯ä¹¦</span></span><br><span class="line">openssl x509 -req -<span class="keyword">in</span> server.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out server.crt -days 365 -sha256</span><br><span class="line"><span class="comment"># æŸ¥çœ‹è¯ä¹¦</span></span><br><span class="line">openssl x509 -<span class="keyword">in</span> server.crt -text -noout</span><br></pre></td></tr></table></figure>
<h3 id="å‚æ•°è¯´æ˜"><a href="#å‚æ•°è¯´æ˜" class="headerlink" title="å‚æ•°è¯´æ˜"></a>å‚æ•°è¯´æ˜</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-newkey rsa:2024 ç”Ÿæˆ2024ä½RSAå¯†é’¥</span><br><span class="line">-nodes           ç”Ÿæˆä¸åŠ å¯†çš„ç§é’¥æ–‡ä»¶</span><br><span class="line">-keyout ca.key   æŒ‡å®šç§é’¥æ–‡ä»¶å</span><br><span class="line">-x509            ç”Ÿæˆè‡ªç­¾åè¯ä¹¦</span><br><span class="line">-days 365        è¯ä¹¦æœ‰æ•ˆæœŸ365å¤©</span><br><span class="line">-out ca.crt      æŒ‡å®šè¯ä¹¦å</span><br><span class="line">-subj &quot;/C=CN/ST=Shanghai/L=Shanghai/O=Organization/OU=OrganizationUnit/CN=Domain&quot; æŒ‡å®šè¯ä¹¦çš„ä¸»é¢˜ä¿¡æ¯,é¿å…æ‰‹åŠ¨è¾“å…¥</span><br><span class="line"></span><br><span class="line">C   å›½å®¶ä»£ç ï¼Œå¦‚ä¸­å›½CN</span><br><span class="line">ST  å·/çœåç§°</span><br><span class="line">L   åŸå¸‚åç§°</span><br><span class="line">O   ç»„ç»‡åç§°ï¼Œå¦‚å…¬å¸åç§°</span><br><span class="line">OU  ç»„ç»‡å•ä½åç§°ï¼Œå¦‚éƒ¨é—¨åç§°</span><br><span class="line">CN  é€šç”¨åç§°ï¼Œé€šå¸¸æ˜¯åŸŸåæˆ–æœåŠ¡å™¨åç§°</span><br></pre></td></tr></table></figure>
<h2 id="æœåŠ¡å™¨é…ç½®è¯ä¹¦"><a href="#æœåŠ¡å™¨é…ç½®è¯ä¹¦" class="headerlink" title="æœåŠ¡å™¨é…ç½®è¯ä¹¦"></a>æœåŠ¡å™¨é…ç½®è¯ä¹¦</h2><h3 id="Nginx"><a href="#Nginx" class="headerlink" title="Nginx"></a>Nginx</h3><p>Nginxå¯ä»¥ç›´æ¥ä½¿ç”¨<code>server.pem</code>è¯ä¹¦ï¼Œé…ç½®å¦‚ä¸‹</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 443 ssl;</span><br><span class="line">    server_name &lt;YourDomain&gt;; # è¯ä¹¦ç»‘å®šçš„åŸŸå,IPåˆ™æ³¨é‡Š</span><br><span class="line">    ssl_certificate cert/server.pem; # ç›¸å¯¹äºé…ç½®æ–‡ä»¶çš„è·¯å¾„</span><br><span class="line">    ssl_certificate_key cert/server-key.pem;</span><br><span class="line">    ssl_session_cache shared:SSL:1m;</span><br><span class="line">    ssl_session_timeout 5m;</span><br><span class="line">    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; # å¯†ç å¥—ä»¶</span><br><span class="line">    ssl_protocols TLSv1.1 TLSv1.2 TLSv1.3;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Kestrel-IIS"><a href="#Kestrel-IIS" class="headerlink" title="Kestrel/IIS"></a>Kestrel/IIS</h3><ol>
<li><code>window server 2019</code>çš„<code>kestrel</code>æœåŠ¡ï¼Œéœ€è¦ä½¿ç”¨<code>openssl 1.1.x</code>è½¬æ¢çš„pfxè¯ä¹¦ï¼ŒåŸç†æš‚æœªç¡®å®šï¼Œè§å‚è€ƒ</li>
<li>éœ€è¦æŠŠ<code>pem</code>è¯ä¹¦è½¬æ¢ä¸º<code>pfx</code>è¯ä¹¦ï¼Œæ‰å¯ä»¥ä½¿ç”¨</li>
</ol>
<h3 id="pemè¯ä¹¦è½¬pfxè¯ä¹¦"><a href="#pemè¯ä¹¦è½¬pfxè¯ä¹¦" class="headerlink" title="pemè¯ä¹¦è½¬pfxè¯ä¹¦"></a><code>pem</code>è¯ä¹¦è½¬<code>pfx</code>è¯ä¹¦</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># ç”Ÿæˆå¯†ç </span></span><br><span class="line">openssl rand -base64 10</span><br><span class="line"><span class="comment"># ä½¿ç”¨å¯†ç ï¼Œè½¬æ¢è¯ä¹¦</span></span><br><span class="line">openssl pkcs12 -<span class="built_in">export</span> -out server.pfx -inkey server-key.pem -<span class="keyword">in</span> server.pem</span><br><span class="line"><span class="comment"># æŸ¥çœ‹pfxè¯ä¹¦</span></span><br><span class="line">openssl pkcs12 -<span class="keyword">in</span> server.pfx -info</span><br><span class="line"><span class="comment"># openssl pkcs12 -clcerts -nokeys -in server.pfx</span></span><br><span class="line"><span class="comment"># openssl pkcs12 -in server.pfx -nocerts -nodes</span></span><br></pre></td></tr></table></figure>
<h2 id="Window-PCé…ç½®æ ¹è¯ä¹¦-ä½¿æµè§ˆå™¨ä¿¡ä»»è‡ªç­¾è¯ä¹¦"><a href="#Window-PCé…ç½®æ ¹è¯ä¹¦-ä½¿æµè§ˆå™¨ä¿¡ä»»è‡ªç­¾è¯ä¹¦" class="headerlink" title="Window PCé…ç½®æ ¹è¯ä¹¦,ä½¿æµè§ˆå™¨ä¿¡ä»»è‡ªç­¾è¯ä¹¦"></a><code>Window PC</code>é…ç½®æ ¹è¯ä¹¦,ä½¿æµè§ˆå™¨ä¿¡ä»»è‡ªç­¾è¯ä¹¦</h2><p>é¦–å…ˆæŠŠæ ¹è¯ä¹¦ä»<code>pem</code>è½¬æˆ<code>pfx</code>,ç„¶åæ·»åŠ åˆ°<code>å—ä¿¡ä»»çš„æ ¹è¯ä¹¦é¢å‘æœºæ„</code>ä½ç½®å³å¯</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl pkcs12 -<span class="built_in">export</span> -out ca.pfx -inkey ca-key.pem -<span class="keyword">in</span> ca.pem</span><br></pre></td></tr></table></figure>
<h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://blog.csdn.net/robin_cai/article/details/120758214" target="_blank" rel="noopener">https://blog.csdn.net/robin_cai/article/details/120758214</a></p>
<p><a href="https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/certificates/" target="_blank" rel="noopener">https://kubernetes.io/zh-cn/docs/tasks/administer-cluster/certificates/</a></p>
<p><a href="https://www.howtouselinux.com/post/converting-cer-crt-der-pem-pfx-certificate#Convert_PEM_to_DER" target="_blank" rel="noopener">https://www.howtouselinux.com/post/converting-cer-crt-der-pem-pfx-certificate#Convert_PEM_to_DER</a></p>
<p><a href="https://blog.csdn.net/u010358168/article/details/83508851" target="_blank" rel="noopener">https://blog.csdn.net/u010358168/article/details/83508851</a></p>
<p><a href="https://blog.csdn.net/u014163312/article/details/105744177" target="_blank" rel="noopener">https://blog.csdn.net/u014163312/article/details/105744177</a></p>
</div></article></div></main><footer><div class="paginator"><a href="/2017/12/31/hello-world/" class="next">NEXT</a></div><div class="copyright"><p>Â© 2015 - 2024 <a href="http://mypanda.github.io">mypanda</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>